(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-411a3ee2"],{"14b9":function(e,t,n){var o=n("5ca1");o(o.P,"String",{repeat:n("9744")})},"214f":function(e,t,n){"use strict";var o=n("32e9"),r=n("2aba"),a=n("79e5"),i=n("be13"),s=n("2b4c");e.exports=function(e,t,n){var c=s(e),l=n(i,c,""[e]),d=l[0],E=l[1];a(function(){var t={};return t[c]=function(){return 7},7!=""[e](t)})&&(r(String.prototype,e,d),o(RegExp.prototype,c,2==t?function(e,t){return E.call(e,this,t)}:function(e){return E.call(e,this)}))}},"28a5":function(e,t,n){n("214f")("split",2,function(e,t,o){"use strict";var r=n("aae3"),a=o,i=[].push,s="split",c="length",l="lastIndex";if("c"=="abbc"[s](/(b)*/)[1]||4!="test"[s](/(?:)/,-1)[c]||2!="ab"[s](/(?:ab)*/)[c]||4!="."[s](/(.?)(.?)/)[c]||"."[s](/()()/)[c]>1||""[s](/.?/)[c]){var d=void 0===/()??/.exec("")[1];o=function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!r(e))return a.call(n,e,t);var o,s,E,h,u,p=[],m=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),T=0,w=void 0===t?4294967295:t>>>0,g=new RegExp(e.source,m+"g");d||(o=new RegExp("^"+g.source+"$(?!\\s)",m));while(s=g.exec(n)){if(E=s.index+s[0][c],E>T&&(p.push(n.slice(T,s.index)),!d&&s[c]>1&&s[0].replace(o,function(){for(u=1;u<arguments[c]-2;u++)void 0===arguments[u]&&(s[u]=void 0)}),s[c]>1&&s.index<n[c]&&i.apply(p,s.slice(1)),h=s[0][c],T=E,p[c]>=w))break;g[l]===s.index&&g[l]++}return T===n[c]?!h&&g.test("")||p.push(""):p.push(n.slice(T)),p[c]>w?p.slice(0,w):p}}else"0"[s](void 0,0)[c]&&(o=function(e,t){return void 0===e&&0===t?[]:a.call(this,e,t)});return[function(n,r){var a=e(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,a,r):o.call(String(a),n,r)},o]})},3599:function(e,t,n){"use strict";var o=n("ee68"),r=n.n(o);r.a},"7f7f":function(e,t,n){var o=n("86cc").f,r=Function.prototype,a=/^\s*function ([^ (]*)/,i="name";i in r||n("9e1e")&&o(r,i,{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(e){return""}}})},9744:function(e,t,n){"use strict";var o=n("4588"),r=n("be13");e.exports=function(e){var t=String(r(this)),n="",a=o(e);if(a<0||a==1/0)throw RangeError("Count can't be negative");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(n+=t);return n}},aae3:function(e,t,n){var o=n("d3f4"),r=n("2d95"),a=n("2b4c")("match");e.exports=function(e){var t;return o(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==r(e))}},ab07:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{attrs:{id:"banner"}},[n("i",{staticClass:"el-icon-d-arrow-left",attrs:{id:"back"}},[e._v("返回")]),n("span",[e._v("3D 电气室实时监控系统")])]),n("div",{attrs:{id:"view"}})])}],a=n("cce4"),i=a["a"],s=(n("3599"),n("2877")),c=Object(s["a"])(i,o,r,!1,null,"7307e7a2",null);c.options.__file="3DElectricalRoom.vue";t["default"]=c.exports},cce4:function(e,t,n){"use strict";(function(e){n("7f7f"),n("14b9"),n("28a5"),n("cadf"),n("551c"),n("097d");t["a"]={name:"",props:[""],data:function(){return{}},components:{},computed:{},beforeMount:function(){},mounted:function(){window.addEventListener("popstate",function(t){e(".machine-zone").remove(),e(".img-zone").remove(),e("#stats").remove(),e("#datGui").remove()},!1);var t=this,n={scene:null,camera:null,renderer:null,light:null,controls:null,width:null,height:null,stats:null,background:1973796,helper:null,gui:null,datGui:null,loop:null},o=null,r=null,a=null,i=null,s=null,c=null,l=null,d=null,E=null,h=null,u=null,p=null,m=null,T=[],w=[],g=[],R=[],f=[],H=[],M=[],y=null,v=null;function x(){t.$axios(t.HOST+"/cabinet").then(function(t){e.each(t.data[0].describ,function(e,t){"0"===t.CABINET_TYPE?w.push(t.CABINET_COORDINATE.split(",")):"1"===t.CABINET_TYPE&&g.push(t.CABINET_COORDINATE.split(",")),M.push(t.DESCRIB_COORDINATE.split(",")),T.push(t.CABINET_NAME)}),e.each(t.data[0].equipInfo,function(e,t){"02"===t.EQ_TYPE?f.push(t.EQ_COORDINATE.split(",")):"03"===t.EQ_TYPE?R.push(t.EQ_COORDINATE.split(",")):(t.EQ_TYPE,H.push(t.EQ_COORDINATE.split(",")))});var n=[];n=t.data[0].partSize.split("*"),v=parseInt(n[1]),y=parseInt(n[0]),b(),console.log(t.data)}).catch(function(e){console.log(e)})}function b(){function x(){n.scene=new THREE.Scene,n.scene.position.z=120}function b(){n.gui={x:0,y:0,z:120},n.datGui=new dat.GUI,n.datGui.domElement.setAttribute("id","datGui"),n.datGui.add(n.gui,"x",-500,500),n.datGui.add(n.gui,"y",-500,500),n.datGui.add(n.gui,"z",-500,500)}function P(){n.camera=new THREE.PerspectiveCamera(35,n.width/n.height,.1,3e3),n.camera.position.set(0,1e3,1100),n.camera.lookAt(new THREE.Vector3(0,2500,0))}function B(){n.renderer=new THREE.WebGLRenderer({antialias:!0}),n.renderer.setSize(n.width,n.height),n.renderer.setClearColor(n.background),n.renderer.shadowMap.enabled=!0,n.renderer.shadowMap.type=THREE.PCFSoftShadowMap,document.getElementById("view").appendChild(n.renderer.domElement)}function _(){n.light=new THREE.DirectionalLight(16777215,1),n.light.position.set(500,1e3,500),n.light.target.position.set(0,0,0),n.light.castShadow=!1;var e=300;n.light.shadow.camera=new THREE.OrthographicCamera(-e,e,e,-e,500,1600),n.light.shadow.bias=1e-4,n.light.shadow.mapSize.width=n.light.shadow.mapSize.height=1024,n.scene.add(n.light),n.scene.add(new THREE.AmbientLight(16777215,.3))}function G(){function e(){i=new THREE.FontLoader,i.load("three/font/MicrosoftYaHei_Regular.json",function(e){for(var t=0,a=M.length;t<a;t++)o=new THREE.TextBufferGeometry(T[t],{font:e,size:11,height:1}),o.computeBoundingBox(),r=new THREE.MeshLambertMaterial({}),s=new THREE.Mesh(o,r),c=s.clone(),c.position.set(M[t][0],M[t][1],M[t][2]),n.scene.add(c)})}function t(){o=new THREE.BoxBufferGeometry(y,10,v),a=(new THREE.TextureLoader).load("three/img/floor.jpg"),a.wrapS=THREE.RepeatWrapping,a.wrapT=THREE.RepeatWrapping,a.repeat.set(8,8),r=new THREE.MeshLambertMaterial({map:a,color:13034239}),s=new THREE.Mesh(o,r),s.rotation.z=-Math.PI,s.position.y=-1,s.name="base",n.scene.add(s)}function x(){l=new THREE.Object3D,o=new THREE.BoxGeometry(20,90,v),r=new THREE.MeshPhongMaterial({color:13034239}),s=new THREE.Mesh(o,r),s.position.set(0,45,0),l.add(s),o=new THREE.BoxGeometry(4,200,v-10),r=new THREE.MeshBasicMaterial({color:49151,opacity:.6,transparent:!0}),s=new THREE.Mesh(o,r),s.position.set(0,145,0),l.add(s),o=new THREE.BoxGeometry(20,30,v),r=new THREE.MeshPhongMaterial({color:13034239}),s=new THREE.Mesh(o,r),s.position.set(0,240,0),l.add(s),l.position.set(-y/2-10,-5,0),n.scene.add(l),d=l.clone(),d.position.set(y/2+10,-5,0),n.scene.add(d)}function b(){l=new THREE.Object3D,a=(new THREE.TextureLoader).load("three/img/rack_front_door.jpg"),r=new THREE.MeshPhongMaterial({map:a}),o=new THREE.BoxGeometry(2,300,150),s=new THREE.Mesh(o,r),s.rotation.y=-.5*Math.PI,s.position.set(0,152,0),l.add(s),a=(new THREE.TextureLoader).load("three/img/rack_door_back.jpg"),r=new THREE.MeshPhongMaterial({map:a}),o=new THREE.BoxGeometry(2,300,150),s=new THREE.Mesh(o,r),s.rotation.y=-.5*Math.PI,s.position.set(0,152,-140),l.add(s),a=(new THREE.TextureLoader).load("three/img/rack_panel.jpg"),r=new THREE.MeshPhongMaterial({map:a,color:3684408}),o=new THREE.BoxGeometry(2,300,140),s=new THREE.Mesh(o,r),s.position.set(-75,152,-70),l.add(s),c=s.clone(),c.position.set(75,152,-70),l.add(c),a=(new THREE.TextureLoader).load("three/img/rack_panel.jpg"),r=new THREE.MeshPhongMaterial({map:a,color:3684408}),o=new THREE.BoxGeometry(150,2,140),s=new THREE.Mesh(o,r),s.position.set(0,2,-70),l.add(s),a=(new THREE.TextureLoader).load("three/img/rack_panel.jpg"),r=new THREE.MeshPhongMaterial({map:a,color:3684408}),o=new THREE.BoxGeometry(140,40,150),s=new THREE.Mesh(o,r),s.position.set(0,290,-70),l.add(s),l.name="machine";for(var e=0,t=w.length;e<t;e++)d=l.clone(),d.position.set(w[e][0],w[e][1],w[e][2]),n.scene.add(d)}function P(){l=new THREE.Object3D,a=(new THREE.TextureLoader).load("three/img/rack_inside.jpg"),r=new THREE.MeshBasicMaterial({map:a,color:16777215}),o=new THREE.BoxGeometry(2,300,150),s=new THREE.Mesh(o,r),E=new THREE.BoxGeometry(2,60,120),h=new THREE.MeshPhongMaterial({color:4878475}),u=new THREE.Mesh(E,h),u.position.y=87,p=new ThreeBSP(s).subtract(new ThreeBSP(u)),E=new THREE.BoxGeometry(2,40,35),h=new THREE.MeshPhongMaterial({color:4878475}),u=new THREE.Mesh(E,h),u.position.y=-118,p=p.subtract(new ThreeBSP(u)),u=u.clone(),u.position.z=45,p=p.subtract(new ThreeBSP(u)),u=u.clone(),u.position.z=-45,p=p.subtract(new ThreeBSP(u)),s=p.toMesh(),s.geometry.computeFaceNormals(),s.geometry.computeVertexNormals(),s.material=new THREE.MeshPhongMaterial({color:15461355}),s.rotation.y=-.5*Math.PI,s.position.set(0,152,0),l.add(s),a=(new THREE.TextureLoader).load("three/img/flag.jpg"),r=new THREE.MeshBasicMaterial({map:a,color:16777215}),o=new THREE.BoxGeometry(120,60,2),s=new THREE.Mesh(o,r),s.position.z=0,s.position.y=240,l.add(s),a=(new THREE.TextureLoader).load("three/img/eee.png"),r=new THREE.MeshBasicMaterial({map:a,color:16777215}),o=new THREE.BoxGeometry(35,40,2),s=new THREE.Mesh(o,r),s.position.z=0,s.position.y=35,l.add(s),s=s.clone(),s.position.x=45,l.add(s),s=s.clone(),s.position.x=-45,l.add(s),a=(new THREE.TextureLoader).load("three/img/lock.png"),r=new THREE.MeshBasicMaterial({map:a,color:16777215}),o=new THREE.BoxGeometry(18,24,10),s=new THREE.Mesh(o,r),s.position.y=166,s.position.x=0,l.add(s),a=(new THREE.TextureLoader).load("three/img/rack_inside.jpg"),r=new THREE.MeshPhongMaterial({map:a,color:16777215}),o=new THREE.BoxGeometry(2,300,150),s=new THREE.Mesh(o,r),s.rotation.y=-.5*Math.PI,s.position.set(0,152,-140),l.add(s),a=(new THREE.TextureLoader).load("three/img/rack_inside.jpg"),r=new THREE.MeshPhongMaterial({map:a,color:16777215}),o=new THREE.BoxGeometry(2,300,140),s=new THREE.Mesh(o,r),s.position.set(-75,152,-70),l.add(s),s=s.clone(),s.position.set(75,152,-70),l.add(s),a=(new THREE.TextureLoader).load("three/img/rack_inside.jpg"),r=new THREE.MeshPhongMaterial({map:a,color:16777215}),o=new THREE.BoxGeometry(150,2,140),s=new THREE.Mesh(o,r),s.position.set(0,2,-70),l.add(s),a=(new THREE.TextureLoader).load("three/img/rack_inside.jpg"),r=new THREE.MeshPhongMaterial({map:a,color:6535423}),o=new THREE.BoxGeometry(140,40,150),s=new THREE.Mesh(o,r),s.position.set(0,290,-70),l.add(s),l.name="air";for(var e=0,t=g.length;e<t;e++)d=l.clone(),d.position.set(g[e][0],g[e][1],g[e][2]),n.scene.add(d)}function B(e,t,n,a){return l=new THREE.Object3D,o=new THREE.CylinderGeometry(20,20,10,40,5),r=new THREE.MeshPhongMaterial({color:15263976}),s=new THREE.Mesh(o,r),s.position.set(0,96,0),l.add(s),o=new THREE.CylinderGeometry(16,16,4,40,5),r=new THREE.MeshBasicMaterial({color:35584,opacity:.4,transparent:!0}),s=new THREE.Mesh(o,r),s.position.set(0,102,0),l.add(s),o=new THREE.CylinderGeometry(8,10,5,40,5),r=new THREE.MeshPhongMaterial({color:15263976}),s=new THREE.Mesh(o,r),s.position.set(0,106,0),l.add(s),l.name="smoke-".concat(a),l.position.set(e,t,n),l}function _(e,t,n,a){return l=new THREE.Object3D,o=new THREE.CylinderGeometry(20,20,10,40,40),r=new THREE.MeshPhongMaterial({color:15263976}),s=new THREE.Mesh(o,r),s.position.set(0,96,0),l.add(s),o=new THREE.CylinderGeometry(20,20,8,40,5),r=new THREE.MeshPhongMaterial({color:128,opacity:.8,transparent:!0}),s=new THREE.Mesh(o,r),s.position.set(0,105,0),l.add(s),o=new THREE.SphereGeometry(20,20,6,0,2*Math.PI,0,Math.PI/2),r=new THREE.MeshPhongMaterial({color:15263976}),s=new THREE.Mesh(o,r),s.position.set(0,109,0),l.add(s),l.name="temperature-".concat(a),l.position.set(e,t,n),l}function G(e,t,n,a){return l=new THREE.Object3D,o=new THREE.BoxGeometry(40,30,40),r=new THREE.MeshPhongMaterial({color:15263976}),s=new THREE.Mesh(o,r),s.position.set(0,103,0),l.add(s),o=new THREE.BoxGeometry(9,26,43),r=new THREE.MeshPhongMaterial({color:8684676,opacity:.9,transparent:!0}),s=new THREE.Mesh(o,r),s.position.set(-20,96,0),l.add(s),s=s.clone(),s.position.set(20,96,0),l.add(s),o=new THREE.CircleGeometry(1.4,36,0,2*Math.PI),r=new THREE.MeshPhongMaterial({color:60928,opacity:.9,transparent:!0}),s=new THREE.Mesh(o,r),s.position.set(-10,107,21),l.add(s),r=new THREE.MeshPhongMaterial({color:15658496,opacity:.9,transparent:!0}),s=new THREE.Mesh(o,r),s.position.set(-5,107,21),l.add(s),r=new THREE.MeshPhongMaterial({color:15597568,opacity:.9,transparent:!0}),s=new THREE.Mesh(o,r),s.position.set(0,107,21),l.add(s),o=new THREE.BoxGeometry(10,6,.5),r=new THREE.MeshPhongMaterial({color:4878475}),s=new THREE.Mesh(o,r),s.castShadow=!1,s.position.set(-3,98,21),l.add(s),c=s.clone(),c.position.set(9,98,21),l.add(c),l.name="controller-".concat(a),l.position.set(e,t,n),l}function C(){for(var e=0,t=R.length;e<t;e++)m=B(R[e][0],R[e][1],R[e][2],e),n.scene.add(m);for(var o=0,r=f.length;o<r;o++)m=_(f[o][0],f[o][1],f[o][2],o),n.scene.add(m);for(var a=0,i=H.length;a<i;a++)m=G(H[a][0],H[a][1],H[a][2],a),n.scene.add(m)}n.helper=new THREE.AxisHelper(1e3),n.scene.add(n.helper),e(),t(),x(),b(),P(),C()}function C(){var o={arr1:[],arr2:[],arr3:[],surge:null,smoke:[],temperature:[],controller:[]};t.$axios(t.HOST+"/cabinet").then(function(t){e.each(t.data[0].equipInfo,function(e,t){"02"===t.EQ_TYPE?"OPC_QUALITY_GOOD"===t.Quality?"0"===t.State?o.arr1.push("normal"):"1"===t.State?o.arr1.push("fire"):"4"===t.State&&o.arr1.push("fault"):"OPC_QUALITY_NOT_CONNECTED"===t.Quality&&o.arr1.push("interrupt"):"03"===t.EQ_TYPE?"OPC_QUALITY_GOOD"===t.Quality?"0"===t.State?o.arr2.push("normal"):"1"===t.State?o.arr2.push("fire"):"4"===t.State&&o.arr2.push("fault"):"OPC_QUALITY_NOT_CONNECTED"===t.Quality&&o.arr2.push("interrupt"):(t.EQ_TYPE,"OPC_QUALITY_GOOD"===t.Quality?"0"===t.State?o.arr3.push("normal"):"1"===t.State?o.arr3.push("fire"):"4"===t.State&&o.arr3.push("fault"):"OPC_QUALITY_NOT_CONNECTED"===t.Quality&&o.arr3.push("interrupt"))});for(var r=0,a=n.scene.children.length;r<a;r++){var i=n.scene.children[r].name;i&&("smoke"===i.substr(0,i.length-2)?o.smoke.push(n.scene.children[r]):"temperature"===i.substr(0,i.length-2)?o.temperature.push(n.scene.children[r]):"controller"===i.substr(0,i.length-2)&&o.controller.push(n.scene.children[r]))}for(var s=0,c=o.smoke.length;s<c;s++)I(o.arr1[s],o.smoke[s].children[2]);for(var l=0,d=o.temperature.length;l<d;l++)I(o.arr2[l],o.temperature[l].children[2]);for(var E=0,h=o.controller.length;E<h;E++)I(o.arr3[E],o.controller[E].children[0]);console.log(t.data)}).catch(function(e){console.log(e)}),setTimeout(function(){null,C()},1e4)}function I(e,t){var n=0,o=[];function r(e,n){e++,2===e&&(e=0),t.material.color.set(n[e]),setTimeout(function(){r(e,n)},1e3)}"interrupt"===e?(o=[15263976,15658496],r(n,o)):"fault"===e?(o=[15263976,16745031],r(n,o)):"fire"===e&&(o=[15263976,15597568],r(n,o))}function O(){n.stats=new Stats,n.stats.domElement.setAttribute("id","stats"),document.body.appendChild(n.stats.dom)}function S(){n.controls=new THREE.OrbitControls(n.camera,n.renderer.domElement),n.controls.enableDamping=!0,n.controls.dampingFactor=.25,n.controls.rotateSpeed=.35,n.controls.enableZoom=!0,n.controls.autoRotate=!1,n.controls.autoRotateSpeed=.5,n.controls.minDistance=1,n.controls.maxDistance=2e3,n.controls.enablePan=!0}function L(){n.stats.update(),n.renderer.render(n.scene,n.camera),n.scene.position.x=n.gui.x,n.scene.position.y=n.gui.y,n.scene.position.z=n.gui.z,n.loop=requestAnimationFrame(L)}function k(){window.addEventListener("resize",function(){n.width=document.getElementById("view").offsetWidth,n.height=document.getElementById("view").offsetHeight,n.camera.aspect=n.width/n.height,n.camera.updateProjectionMatrix(),n.renderer.setSize(n.width,n.height)})}function D(){Detector.webgl||Detector.addGetWebGLMessage(),x(),b(),P(),B(),_(),G(),C(),S(),O(),L(),k()}n.width=document.getElementById("view").offsetWidth,n.height=document.getElementById("view").offsetHeight,D()}function P(){cancelAnimationFrame(n.loop),r.dispose(),a.dispose(),o.dispose(),n.renderer.dispose(),n.controls.dispose();for(var e=n.scene.children.length-1;e>-1;e--){if("Object3D"==n.scene.children[e].type)for(var i=n.scene.children[e].children.length-1;i>-1;i--)n.scene.children[e].children[i].material.map&&n.scene.children[e].children[i].material.map.dispose(),n.scene.children[e].children[i].geometry.dispose(),n.scene.children[e].children[i].material.dispose(),n.scene.children[e].remove(n.scene.children[e].children[i]);else"Mesh"==n.scene.children[e].type?(n.scene.children[e].material.map&&n.scene.children[e].material.map.dispose(),n.scene.children[e].geometry.dispose(),n.scene.children[e].material.dispose()):"LineSegments"==n.scene.children[e].type&&(n.scene.children[e].geometry.dispose(),n.scene.children[e].material.dispose());n.scene.remove(n.scene.children[e])}n.renderer=null,n.scene=null,document.getElementById("stats").parentNode.removeChild(document.getElementById("stats")),document.getElementById("datGui").parentNode.removeChild(document.getElementById("datGui")),null,t.$router.push({name:"works"})}x(),document.getElementById("back").addEventListener("click",function(){P()})},methods:{},watch:{}}}).call(this,n("1157"))},ee68:function(e,t,n){}}]);
//# sourceMappingURL=chunk-411a3ee2.68128fee.js.map